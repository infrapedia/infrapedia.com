{"version":3,"sources":["webpack:///./src/components/dialogs/ViewData.vue?1f7b","webpack:///src/components/dialogs/ViewData.vue","webpack:///./src/components/dialogs/ViewData.vue?8ee1","webpack:///./src/components/dialogs/ViewData.vue","webpack:///./src/components/dialogs/ViewData.vue?a760"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","_v","_s","data","on","$event","$emit","tableData","scopedSlots","_u","key","fn","scope","row","property","staticRenderFns","props","isVisible","type","Boolean","required","Object","acceptedKeys","Array","computed","dark","$store","state","isDark","customDialogClass","watch","bool","handleDataVisualization","setTimeout","mounted","methods","keys","map","createMap","addIssueDraw","toggleTheme","container","zoom","mapConfig","center","style","displayControlsDefault","controls","maxWidth","unit","draw","addControl","scaleCtrl","vm","changeMode","set","elemnt","features","geometry","coords","bbox","reduce","fitBounds","padding","animate","speed","pan","duration","setStyle","component"],"mappings":"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","file":"js/chunk-6bcd4d26.4e637306.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVisible),expression:\"isVisible\"}],staticClass:\"el-dialog__wrapper z-index120\"},[_c('transition',{attrs:{\"tag\":\"div\",\"mode\":\"in-out\",\"name\":\"animated faster\",\"enter-active-class\":\"fadeInDown\",\"leave-active-class\":\"fadeOutUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVisible),expression:\"isVisible\"}],staticClass:\"inner-wrapper el-dialog\"},[_c('div',{staticClass:\"el-dialog__header\"},[_c('header',{staticClass:\"w-fit-full p0 no-selectable\"},[_c('h1',{staticClass:\"inline-block font-semibold fs-xlarge\"},[_vm._v(\" Viewing data: \"+_vm._s(_vm.data.name)+\" \")]),_c('el-button',{staticClass:\"el-dialog__headerbtn p0\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('fa',{staticClass:\"el-dialog__close el-icon el-icon-close\",attrs:{\"icon\":['fas', 'times']}})],1)],1)]),_c('div',{staticClass:\"el-dialog__body\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"xs\":24,\"lg\":12}},[_c('el-table',{attrs:{\"data\":_vm.tableData,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"Property\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.property === 'rgDate')?_c('p',{staticClass:\"capitalize\"},[_vm._v(\" Register Date \")]):_c('p',{staticClass:\"capitalize\"},[_vm._v(\" \"+_vm._s(scope.row.property)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"Value\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.property === 'phone')?_c('a',{attrs:{\"href\":(\"tel:\" + (scope.row.value)),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(scope.row.value)+\" \")]):_c('p',[_vm._v(\" \"+_vm._s(scope.row.value)+\" \")])]}}])})],1)],1),_c('el-col',{attrs:{\"xs\":24,\"lg\":12}},[_c('div',{staticClass:\"w-fit-full\",attrs:{\"id\":\"map\"}})])],1)],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"el-dialog__wrapper z-index120\" v-show=\"isVisible\">\n    <transition\n      tag=\"div\"\n      mode=\"in-out\"\n      name=\"animated faster\"\n      enter-active-class=\"fadeInDown\"\n      leave-active-class=\"fadeOutUp\"\n    >\n      <div class=\"inner-wrapper el-dialog\" v-show=\"isVisible\">\n        <div class=\"el-dialog__header\">\n          <header class=\"w-fit-full p0 no-selectable\">\n            <h1 class=\"inline-block font-semibold fs-xlarge\">\n              Viewing data: {{ data.name }}\n            </h1>\n            <el-button\n              class=\"el-dialog__headerbtn p0\"\n              type=\"text\"\n              @click=\"$emit('close')\"\n            >\n              <fa\n                :icon=\"['fas', 'times']\"\n                class=\"el-dialog__close el-icon el-icon-close\"\n              />\n            </el-button>\n          </header>\n        </div>\n        <div class=\"el-dialog__body\">\n          <el-row :gutter=\"20\">\n            <el-col :xs=\"24\" :lg=\"12\">\n              <el-table :data=\"tableData\" stripe>\n                <el-table-column label=\"Property\">\n                  <template slot-scope=\"scope\">\n                    <p\n                      v-if=\"scope.row.property === 'rgDate'\"\n                      class=\"capitalize\"\n                    >\n                      Register Date\n                    </p>\n                    <p v-else class=\"capitalize\">\n                      {{ scope.row.property }}\n                    </p>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"Value\">\n                  <template slot-scope=\"scope\">\n                    <a\n                      v-if=\"scope.row.property === 'phone'\"\n                      :href=\"`tel:${scope.row.value}`\"\n                      target=\"_blank\"\n                    >\n                      {{ scope.row.value }}\n                    </a>\n                    <p v-else>\n                      {{ scope.row.value }}\n                    </p>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-col>\n            <el-col :xs=\"24\" :lg=\"12\">\n              <div id=\"map\" class=\"w-fit-full\" />\n            </el-col>\n          </el-row>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from 'mapbox-gl'\nimport MapboxDraw from '@mapbox/mapbox-gl-draw'\nimport { mapConfig } from '../../config/mapConfig'\nimport { formatDate } from '../../helpers/formatDate'\n\nexport default {\n  name: 'ViewDataDialog',\n  props: {\n    isVisible: {\n      type: Boolean,\n      required: true\n    },\n    data: {\n      type: Object,\n      required: true\n    },\n    acceptedKeys: {\n      type: Array,\n      required: true\n    }\n  },\n  data: () => ({\n    map: null,\n    draw: null,\n    tableData: []\n  }),\n  computed: {\n    dark() {\n      return this.$store.state.isDark\n    },\n    customDialogClass() {\n      return this.dark ? 'custom-dialog dark' : 'custom-dialog light'\n    }\n  },\n  watch: {\n    isVisible(bool) {\n      if (!bool) return\n      this.handleDataVisualization()\n      setTimeout(() => {\n        this.map.resize()\n      }, 220)\n    }\n  },\n  mounted() {\n    this.handleDataVisualization()\n  },\n  methods: {\n    handleDataVisualization() {\n      if (!this.data || !this.isVisible) return\n\n      this.tableData = Object.keys(this.data)\n        .map(key => {\n          if (this.acceptedKeys.includes(key) && key.includes('Date')) {\n            return {\n              property: key,\n              value: this.data[key] ? formatDate(this.data[key]) : 'no data'\n            }\n          } else {\n            return this.acceptedKeys.includes(key)\n              ? {\n                  property: key,\n                  value: this.data[key] ? this.data[key] : 'no data'\n                }\n              : false\n          }\n        })\n        .filter(d => d)\n\n      if (!this.map) this.map = this.createMap()\n      this.addIssueDraw()\n      return this.toggleTheme(this.dark)\n    },\n    createMap() {\n      mapboxgl.accessToken = mapConfig.mapToken\n\n      const map = new mapboxgl.Map({\n        container: 'map',\n        zoom: mapConfig.zoom,\n        center: mapConfig.center,\n        style: mapConfig.default\n      })\n\n      const draw = new MapboxDraw({\n        displayControlsDefault: false,\n        controls: false\n      })\n      const scaleCtrl = new mapboxgl.ScaleControl({\n        maxWidth: 80,\n        unit: 'metric'\n      })\n\n      this.draw = draw\n      let vm = this\n      map.addControl(scaleCtrl, 'bottom-left')\n      map.addControl(draw, 'bottom-left')\n      // eslint-disable-next-line\n      map.on('draw.selectionchange', function(e) {\r\n        return vm.draw.changeMode('simple_select', {})\n      })\n      return map\n    },\n    addIssueDraw() {\n      const elemnt = this.data.elemnt_id.geom\n      this.draw.set(elemnt)\n      let bbox = []\n      let coords = []\n\n      if (elemnt.features[0].geometry.type !== 'Point') {\n        coords = [\n          elemnt.features[0].geometry.coordinates[0],\n          elemnt.features[elemnt.features.length - 1].geometry.coordinates[0]\n        ]\n        bbox = coords.reduce(\n          (bounds, coord) => bounds.extend(coord),\n          new mapboxgl.LngLatBounds(coords[0], coords[0])\n        )\n      } else {\n        // Calculation of bounds for points\n        coords = [\n          elemnt.features[0].geometry.coordinates,\n          elemnt.features[elemnt.features.length - 1].geometry.coordinates\n        ]\n        bbox = coords.reduce(\n          (bounds, coord) => bounds.extend(coord),\n          new mapboxgl.LngLatBounds(coords[0], coords[0])\n        )\n      }\n\n      this.map.fitBounds(bbox, {\n        padding: 90,\n        animate: true,\n        zoom: 3.68,\n        speed: 1.75,\n        pan: {\n          duration: 25\n        }\n      })\n    },\n    toggleTheme(dark) {\n      if (!this.map) return\n\n      const style = dark ? mapConfig.darkBasemap : mapConfig.default\n      this.map.setStyle(style)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/scss/components/view-issue-dialog-styles.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewData.vue?vue&type=template&id=2a91be51&scoped=true&\"\nimport script from \"./ViewData.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewData.vue?vue&type=style&index=0&id=2a91be51&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a91be51\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=style&index=0&id=2a91be51&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=style&index=0&id=2a91be51&lang=scss&scoped=true&\""],"sourceRoot":""}