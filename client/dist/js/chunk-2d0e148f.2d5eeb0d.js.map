{"version":3,"sources":["webpack:///./src/components/dialogs/VerificationDialog.vue?8bdd","webpack:///src/components/dialogs/VerificationDialog.vue","webpack:///./src/components/dialogs/VerificationDialog.vue?2a62","webpack:///./src/components/dialogs/VerificationDialog.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isVisible","customDialogClass","on","$event","staticClass","slot","_v","directives","name","rawName","value","expression","class","dark","model","callback","$$v","email","ref","siteKey","handleCatchaVerification","catchaVerified","closeDialog","isFormUncomplete","sendingData","submitForm","type","indexOf","_k","keyCode","key","staticRenderFns","components","VueRecaptcha","data","computed","get","$store","state","isVerificationDialog","set","watch","bool","$refs","catpcha","reset","setUserData","methods","v","commit","component"],"mappings":"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","file":"js/chunk-2d0e148f.2d5eeb0d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.isVisible,\"width\":\"40%\",\"top\":\"12vh\",\"custom-class\":_vm.customDialogClass,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event}}},[_c('header',{staticClass:\"header p0 no-selectable\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('h1',{staticClass:\"inline-block font-semibold fs-xlarge\"},[_c('span',{staticClass:\"capitalize\"},[_vm._v(\"Request to verify ownership\")])])]),_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"pr2 pl2\"},[_c('el-form-item',{attrs:{\"label\":\"Email\"}},[_c('el-input',{class:{ dark: _vm.dark },attrs:{\"type\":\"email\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1),_c('el-form-item',[_c('vue-recaptcha',{ref:\"catpcha\",attrs:{\"sitekey\":_vm.siteKey,\"loadRecaptchaScript\":true},on:{\"verify\":_vm.handleCatchaVerification,\"error\":function () { return (_vm.catchaVerified = false); },\"expired\":function () { return (_vm.catchaVerified = false); }}})],1)],1),_c('footer',{staticClass:\"footer flex wrap justify-content-end pr0 pl6\"},[_c('div',[_c('el-button',{staticClass:\"mr2\",class:{ dark: _vm.dark },attrs:{\"plain\":\"\",\"type\":\"info\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancel\")]),_c('el-button',{class:{ dark: _vm.dark },attrs:{\"disabled\":_vm.isFormUncomplete,\"type\":\"primary\",\"plain\":\"\",\"loading\":_vm.sendingData},on:{\"click\":_vm.submitForm,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }return _vm.submitForm($event)}}},[_vm._v(\"Send request\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :visible.sync=\"isVisible\"\n    width=\"40%\"\n    top=\"12vh\"\n    :custom-class=\"customDialogClass\"\n    :close-on-click-modal=\"false\"\n  >\n    <header slot=\"title\" class=\"header p0 no-selectable\">\n      <h1 class=\"inline-block font-semibold fs-xlarge\">\n        <span class=\"capitalize\">Request to verify ownership</span>\n      </h1>\n    </header>\n    <el-form class=\"pr2 pl2\" v-loading=\"loading\">\n      <el-form-item label=\"Email\">\n        <el-input type=\"email\" v-model=\"email\" :class=\"{ dark }\" />\n      </el-form-item>\n      <el-form-item>\n        <vue-recaptcha\n          ref=\"catpcha\"\n          :sitekey=\"siteKey\"\n          :loadRecaptchaScript=\"true\"\n          @verify=\"handleCatchaVerification\"\n          @error=\"() => (catchaVerified = false)\"\n          @expired=\"() => (catchaVerified = false)\"\n        />\n      </el-form-item>\n    </el-form>\n    <footer class=\"footer flex wrap justify-content-end pr0 pl6\">\n      <div>\n        <el-button\n          :class=\"{ dark }\"\n          plain\n          type=\"info\"\n          class=\"mr2\"\n          @click=\"closeDialog\"\n          >Cancel</el-button\n        >\n        <el-button\n          :disabled=\"isFormUncomplete\"\n          type=\"primary\"\n          plain\n          :class=\"{ dark }\"\n          @click=\"submitForm\"\n          :loading=\"sendingData\"\n          @keyup.enter.space=\"submitForm\"\n          >Send request</el-button\n        >\n      </div>\n    </footer>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { getUserData } from '../../services/api/auth'\nimport { verifyElement } from '../../services/api/users'\nimport { TOGGLE_VERIFICATION_DIALOG } from '../../store/actionTypes'\nimport { getSelectionTypeNumber } from '../../helpers/getSelectionTypeNumber'\nimport VueRecaptcha from 'vue-recaptcha'\nimport siteKey from '../../config/siteKey'\n\nexport default {\n  components: {\n    VueRecaptcha\n  },\n  data: () => ({\n    siteKey,\n    email: '',\n    loading: false,\n    sendingData: false,\n    catchaVerified: null\n  }),\n  computed: {\n    ...mapState({\n      dark: state => state.isDark,\n      focus: state => state.map.focus\n    }),\n    isVisible: {\n      get() {\n        return this.$store.state.isVerificationDialog\n      },\n      set() {\n        return this.closeDialog()\n      }\n    },\n    isFormUncomplete() {\n      return this.email === '' || !this.catchaVerified ? true : false\n    },\n    customDialogClass() {\n      return this.dark ? 'custom-dialog dark' : 'custom-dialog light'\n    }\n  },\n  watch: {\n    isVisible(bool) {\n      if (!bool) return this.$refs.catpcha.reset()\n      this.setUserData()\n    }\n  },\n  methods: {\n    handleCatchaVerification(v) {\n      if (!v) return\n      else this.catchaVerified = true\n    },\n    async setUserData() {\n      if (!this.$auth.user) return\n      this.loading = true\n      const userData = await getUserData(await this.$auth.getUserID())\n\n      if (userData) {\n        this.email =\n          userData.user_metadata && userData.user_metadata.email\n            ? userData.user_metadata.email\n            : userData.email\n      }\n      this.loading = false\n    },\n    async submitForm() {\n      this.sendingData = true\n      const res = await verifyElement({\n        user_id: await this.$auth.getUserID(),\n        email: this.email,\n        elemnt: this.focus.id,\n        type: getSelectionTypeNumber(this.focus.type)\n      })\n      this.sendingData = false\n      if (res && res.t !== 'error') {\n        this.closeDialog()\n      }\n    },\n    closeDialog() {\n      this.$store.commit(`${TOGGLE_VERIFICATION_DIALOG}`, false)\n      this.email = ''\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerificationDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerificationDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VerificationDialog.vue?vue&type=template&id=2e564355&\"\nimport script from \"./VerificationDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./VerificationDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}