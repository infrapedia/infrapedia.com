{"version":3,"sources":["webpack:///./src/config/siteKey.js","webpack:///./src/components/dialogs/IssuesDialog.vue?2208","webpack:///src/components/dialogs/IssuesDialog.vue","webpack:///./src/components/dialogs/IssuesDialog.vue?e5a1","webpack:///./src/components/dialogs/IssuesDialog.vue","webpack:///./src/helpers/validateEmail.js","webpack:///./node_modules/vue-recaptcha/dist/vue-recaptcha.es.js"],"names":["siteKey","process","render","_vm","this","_h","$createElement","_c","_self","attrs","isVisible","customDialogClass","on","$event","staticClass","slot","_v","ref","form","formRules","class","dark","model","value","callback","$$v","$set","expression","validatePhoneNumber","phone","num","valid","_e","handleCatchaVerification","catchaVerified","closeDialog","isFormUncomplete","isSendingData","submitForm","type","indexOf","_k","keyCode","key","staticRenderFns","components","VueRecaptcha","data","required","message","trigger","min","computed","get","$store","state","isIssueDialog","set","isDark","emptyFields","length","watch","bool","$refs","catpcha","reset","setUserData","methods","v","number","isValid","formRef","validate","commit","resetFields","email","issue","fullname","component","validateEmail","emailString","rgx","test","String","toLowerCase","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","defer","callbacks","resolve","val","len","then","cb","push","deferred","resolved","promise","ownProp","createRecaptcha","notify","wait","ele","options","window","grecaptcha","widgetId","assertLoaded","execute","checkRecaptchaLoad","Error","recaptcha","vueRecaptchaApiLoaded","name","props","sitekey","theme","badge","size","tabindex","loadRecaptchaScript","Boolean","recaptchaScriptId","recaptchaHost","language","beforeMount","document","getElementById","script","createElement","id","src","async","head","appendChild","mounted","_this","opts","$props","emitVerify","emitExpired","emitError","container","$slots","$el","children","$widgetId","$emit","response","h"],"mappings":"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","file":"js/chunk-4b4a53f2.733faf32.js","sourcesContent":["const siteKey = process.env.VUE_APP_CATCHA_SITE_KEY\n\nexport default siteKey\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.isVisible,\"width\":\"80%\",\"top\":\"28vh\",\"custom-class\":_vm.customDialogClass,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.isVisible=$event}}},[_c('header',{staticClass:\"header p0 no-selectable\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('h1',{staticClass:\"inline-block font-semibold fs-xlarge\"},[_vm._v(\"Report your issue\")])]),_c('el-form',{ref:\"form\",staticClass:\"pr6 pl6\",attrs:{\"model\":_vm.form,\"rules\":_vm.formRules}},[_c('el-row',{attrs:{\"gutter\":15}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"Full Name\",\"prop\":\"name\"}},[_c('el-input',{class:{ dark: _vm.dark },model:{value:(_vm.form.fullname),callback:function ($$v) {_vm.$set(_vm.form, \"fullname\", $$v)},expression:\"form.fullname\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"Phone number\"}},[_c('div',{staticClass:\"el-input\"},[_c('i-phone-input',{staticClass:\"m0 p0 el-input__inner\",attrs:{\"inputClasses\":\"el-input__inner issues-dialog\"},on:{\"onInput\":_vm.validatePhoneNumber},model:{value:(_vm.form.phone.num),callback:function ($$v) {_vm.$set(_vm.form.phone, \"num\", $$v)},expression:\"form.phone.num\"}})],1),_c('el-collapse-transition',[(_vm.form.phone.num && !_vm.form.phone.valid)?_c('el-alert',{staticClass:\"mt2 h8\",attrs:{\"type\":\"error\",\"show-icon\":\"\",\"title\":\"This phone number is not valid\",\"closable\":false}}):_vm._e()],1)],1)],1)],1),_c('el-row',{attrs:{\"gutter\":15}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"Email\",\"prop\":\"email\"}},[_c('el-input',{class:{ dark: _vm.dark },attrs:{\"type\":\"email\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"Issue\",\"prop\":\"issue\"}},[_c('el-input',{class:{ dark: _vm.dark },attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.issue),callback:function ($$v) {_vm.$set(_vm.form, \"issue\", $$v)},expression:\"form.issue\"}})],1)],1),_c('el-col',{attrs:{\"span\":24}},[_c('vue-recaptcha',{ref:\"catpcha\",attrs:{\"sitekey\":_vm.siteKey,\"loadRecaptchaScript\":true},on:{\"verify\":_vm.handleCatchaVerification,\"error\":function () { return (_vm.catchaVerified = false); },\"expired\":function () { return (_vm.catchaVerified = false); }}})],1)],1)],1),_c('footer',{staticClass:\"footer flex justify-content-space-between pr0 pl6 mt4\"},[_c('small',{staticClass:\"inline-block mt2\"},[_c('span',{staticClass:\"text-red\"},[_vm._v(\"*\")]),_vm._v(\" indicates required field \")]),_c('div',[_c('el-button',{staticClass:\"mr2\",attrs:{\"plain\":\"\",\"type\":\"info\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancel\")]),_c('el-button',{staticClass:\"w24\",attrs:{\"disabled\":_vm.isFormUncomplete,\"type\":\"primary\",\"plain\":\"\",\"loading\":_vm.isSendingData},on:{\"click\":function($event){return _vm.submitForm('form')},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }return _vm.submitForm('form')}}},[_vm._v(\"Report\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog\n    :visible.sync=\"isVisible\"\n    width=\"80%\"\n    top=\"28vh\"\n    :custom-class=\"customDialogClass\"\n    :close-on-click-modal=\"false\"\n  >\n    <header slot=\"title\" class=\"header p0 no-selectable\">\n      <h1 class=\"inline-block font-semibold fs-xlarge\">Report your issue</h1>\n    </header>\n    <el-form :model=\"form\" :rules=\"formRules\" class=\"pr6 pl6\" ref=\"form\">\n      <el-row :gutter=\"15\">\n        <el-col :span=\"12\">\n          <el-form-item label=\"Full Name\" prop=\"name\">\n            <el-input v-model=\"form.fullname\" :class=\"{ dark }\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"Phone number\">\n            <div class=\"el-input\">\n              <i-phone-input\n                inputClasses=\"el-input__inner issues-dialog\"\n                v-model=\"form.phone.num\"\n                @onInput=\"validatePhoneNumber\"\n                class=\"m0 p0 el-input__inner\"\n              />\n            </div>\n            <el-collapse-transition>\n              <el-alert\n                type=\"error\"\n                class=\"mt2 h8\"\n                show-icon\n                title=\"This phone number is not valid\"\n                :closable=\"false\"\n                v-if=\"form.phone.num && !form.phone.valid\"\n              />\n            </el-collapse-transition>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"15\">\n        <el-col :span=\"12\">\n          <el-form-item label=\"Email\" prop=\"email\">\n            <el-input type=\"email\" v-model=\"form.email\" :class=\"{ dark }\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"Issue\" prop=\"issue\">\n            <el-input type=\"textarea\" :class=\"{ dark }\" v-model=\"form.issue\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <vue-recaptcha\n            ref=\"catpcha\"\n            :sitekey=\"siteKey\"\n            :loadRecaptchaScript=\"true\"\n            @verify=\"handleCatchaVerification\"\n            @error=\"() => (catchaVerified = false)\"\n            @expired=\"() => (catchaVerified = false)\"\n          />\n        </el-col>\n      </el-row>\n    </el-form>\n    <footer class=\"footer flex justify-content-space-between pr0 pl6 mt4\">\n      <small class=\"inline-block mt2\">\n        <span class=\"text-red\">*</span> indicates required field\n      </small>\n      <div>\n        <el-button plain type=\"info\" class=\"mr2\" @click=\"closeDialog\"\n          >Cancel</el-button\n        >\n        <el-button\n          :disabled=\"isFormUncomplete\"\n          type=\"primary\"\n          class=\"w24\"\n          plain\n          :loading=\"isSendingData\"\n          @click=\"submitForm('form')\"\n          @keyup.enter.space=\"submitForm('form')\"\n          >Report</el-button\n        >\n      </div>\n    </footer>\n  </el-dialog>\n</template>\n\n<script>\nimport { TOGGLE_ISSUES_DIALOG } from '@/store/actionTypes'\nimport { createIssue } from '../../services/api/issues'\nimport { getUserData } from '../../services/api/auth'\nimport { getSelectionTypeNumber } from '../../helpers/getSelectionTypeNumber'\nimport VueRecaptcha from 'vue-recaptcha'\nimport siteKey from '../../config/siteKey'\nimport validateEmail from '../../helpers/validateEmail'\n\nexport default {\n  components: {\n    VueRecaptcha\n  },\n  data: () => ({\n    siteKey,\n    loading: false,\n    isSendingData: false,\n    catchaVerified: null,\n    form: {\n      email: '',\n      issue: '',\n      phone: {\n        num: '',\n        valid: null\n      },\n      fullname: ''\n    },\n    formRules: {\n      phone: [],\n      lastname: [\n        {\n          required: true,\n          message: 'Please input your full name',\n          trigger: 'blur'\n        }\n      ],\n      email: [\n        { required: true, message: 'Please input your email', trigger: 'blur' },\n        {\n          type: 'email',\n          required: true,\n          message: 'Please input a valid email',\n          trigger: 'change'\n        }\n      ],\n      issue: [\n        {\n          required: true,\n          message: 'Please input the issue',\n          trigger: ['blur', 'change']\n        },\n        {\n          min: 10,\n          message: 'Issue length should be at least 10',\n          trigger: 'blur'\n        }\n      ]\n    }\n  }),\n  computed: {\n    isVisible: {\n      get() {\n        return this.$store.state.isIssueDialog\n      },\n      set() {\n        return this.closeDialog()\n      }\n    },\n    dark() {\n      return this.$store.state.isDark\n    },\n    isFormUncomplete() {\n      const emptyFields = Object.keys(this.form).filter(key => !this.form[key])\n      return emptyFields.length || !this.catchaVerified ? true : false\n    },\n    customDialogClass() {\n      return this.dark ? 'custom-dialog dark' : 'custom-dialog light'\n    }\n  },\n  watch: {\n    isVisible(bool) {\n      if (!bool) return this.$refs.catpcha.reset()\n      this.setUserData()\n    }\n  },\n  methods: {\n    handleCatchaVerification(v) {\n      if (!v) return\n      else this.catchaVerified = true\n    },\n    async setUserData() {\n      if (!this.$auth.user) return\n      this.loading = true\n      const userData = await getUserData(this.$auth.user.sub)\n\n      if (userData) {\n        const { user_metadata } = userData\n\n        this.form.fullname =\n          user_metadata && user_metadata.name\n            ? user_metadata.name\n            : validateEmail(userData.name)\n            ? ''\n            : userData.name\n        this.form.email =\n          user_metadata && user_metadata.email\n            ? user_metadata.email\n            : userData.email\n        this.form.phone =\n          user_metadata && user_metadata.phonenumber\n            ? user_metadata.phonenumber\n            : {\n                num: '',\n                valid: null\n              }\n      }\n      this.loading = false\n    },\n    async sendIssueRequest() {\n      const { focus } = this.$store.state.map\n\n      this.isSendingData = true\n      const res = await createIssue({\n        user_id: this.$auth.user.sub,\n        ...this.form,\n        elemnt: focus.id,\n        t: getSelectionTypeNumber(focus.type)\n      })\n      this.isSendingData = false\n      if (res && res.t !== 'error') this.closeDialog()\n    },\n    validatePhoneNumber({ number, isValid }) {\n      this.form.phone = {\n        num: number,\n        valid: isValid\n      }\n    },\n    submitForm(formRef) {\n      this.$refs[formRef].validate(valid => {\n        if (valid) this.sendIssueRequest()\n        else return false\n      })\n    },\n    closeDialog() {\n      this.$store.commit(`${TOGGLE_ISSUES_DIALOG}`, false)\n      this.$refs.form.resetFields()\n      this.form = {\n        email: '',\n        issue: '',\n        phone: {\n          num: '',\n          valid: null\n        },\n        fullname: ''\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IssuesDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IssuesDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IssuesDialog.vue?vue&type=template&id=07c626bc&\"\nimport script from \"./IssuesDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./IssuesDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function validateEmail(emailString) {\n  // eslint-disable-next-line\n  const rgx = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n  return rgx.test(String(emailString).toLowerCase())\n}\n","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar defer = function defer() {\n  var state = false; // Resolved or not\n\n  var callbacks = [];\n\n  var resolve = function resolve(val) {\n    if (state) {\n      return;\n    }\n\n    state = true;\n\n    for (var i = 0, len = callbacks.length; i < len; i++) {\n      callbacks[i](val);\n    }\n  };\n\n  var then = function then(cb) {\n    if (!state) {\n      callbacks.push(cb);\n      return;\n    }\n\n    cb();\n  };\n\n  var deferred = {\n    resolved: function resolved() {\n      return state;\n    },\n    resolve: resolve,\n    promise: {\n      then: then\n    }\n  };\n  return deferred;\n};\n\nvar ownProp = Object.prototype.hasOwnProperty;\nfunction createRecaptcha() {\n  var deferred = defer();\n  return {\n    notify: function notify() {\n      deferred.resolve();\n    },\n    wait: function wait() {\n      return deferred.promise;\n    },\n    render: function render(ele, options, cb) {\n      this.wait().then(function () {\n        cb(window.grecaptcha.render(ele, options));\n      });\n    },\n    reset: function reset(widgetId) {\n      if (typeof widgetId === 'undefined') {\n        return;\n      }\n\n      this.assertLoaded();\n      this.wait().then(function () {\n        return window.grecaptcha.reset(widgetId);\n      });\n    },\n    execute: function execute(widgetId) {\n      if (typeof widgetId === 'undefined') {\n        return;\n      }\n\n      this.assertLoaded();\n      this.wait().then(function () {\n        return window.grecaptcha.execute(widgetId);\n      });\n    },\n    checkRecaptchaLoad: function checkRecaptchaLoad() {\n      if (ownProp.call(window, 'grecaptcha') && ownProp.call(window.grecaptcha, 'render')) {\n        this.notify();\n      }\n    },\n    assertLoaded: function assertLoaded() {\n      if (!deferred.resolved()) {\n        throw new Error('ReCAPTCHA has not been loaded');\n      }\n    }\n  };\n}\nvar recaptcha = createRecaptcha();\n\nif (typeof window !== 'undefined') {\n  window.vueRecaptchaApiLoaded = recaptcha.notify;\n}\n\nvar VueRecaptcha = {\n  name: 'VueRecaptcha',\n  props: {\n    sitekey: {\n      type: String,\n      required: true\n    },\n    theme: {\n      type: String\n    },\n    badge: {\n      type: String\n    },\n    type: {\n      type: String\n    },\n    size: {\n      type: String\n    },\n    tabindex: {\n      type: String\n    },\n    loadRecaptchaScript: {\n      type: Boolean,\n      \"default\": false\n    },\n    recaptchaScriptId: {\n      type: String,\n      \"default\": '__RECAPTCHA_SCRIPT'\n    },\n    recaptchaHost: {\n      type: String,\n      \"default\": 'www.google.com'\n    },\n    language: {\n      type: String,\n      \"default\": ''\n    }\n  },\n  beforeMount: function beforeMount() {\n    if (this.loadRecaptchaScript) {\n      if (!document.getElementById(this.recaptchaScriptId)) {\n        // Note: vueRecaptchaApiLoaded load callback name is per the latest documentation\n        var script = document.createElement('script');\n        script.id = this.recaptchaScriptId;\n        script.src = \"https://\" + this.recaptchaHost + \"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl=\" + this.language;\n        script.async = true;\n        script.defer = true;\n        document.head.appendChild(script);\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    recaptcha.checkRecaptchaLoad();\n\n    var opts = _extends({}, this.$props, {\n      callback: this.emitVerify,\n      'expired-callback': this.emitExpired,\n      'error-callback': this.emitError\n    });\n\n    var container = this.$slots[\"default\"] ? this.$el.children[0] : this.$el;\n    recaptcha.render(container, opts, function (id) {\n      _this.$widgetId = id;\n\n      _this.$emit('render', id);\n    });\n  },\n  methods: {\n    reset: function reset() {\n      recaptcha.reset(this.$widgetId);\n    },\n    execute: function execute() {\n      recaptcha.execute(this.$widgetId);\n    },\n    emitVerify: function emitVerify(response) {\n      this.$emit('verify', response);\n    },\n    emitExpired: function emitExpired() {\n      this.$emit('expired');\n    },\n    emitError: function emitError() {\n      this.$emit('error');\n    }\n  },\n  render: function render(h) {\n    return h('div', {}, this.$slots[\"default\"]);\n  }\n};\n\nexport default VueRecaptcha;\n"],"sourceRoot":""}